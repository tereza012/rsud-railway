import{r as k,j as e,B as w,y as F,q as K}from"./app-BmJ9-8ba.js";import{C as B,a as M,b as V,c as D,d as E}from"./card-CiqlAvGj.js";import{z as o,L as m,I as g}from"./input-CwNdd4mS.js";import{U as R}from"./UsersDocs-C6Y1cG_G.js";import{P as $,I as C,a as U}from"./ProvinceRegencySelect-CH5Ynvej.js";import{u as L,v as J}from"./index-DNT3TRw4.js";import"./app-BWRYm4UO.js";import"./index-B8jzc5xN.js";import"./tiny-invariant-CopsF_GD.js";import"./select-mkzc42j4.js";import"./useQuery-pHrLegI5.js";const z=2*1024*1024,T=o.object({name:o.string().min(1,"Nama tidak boleh kosong"),username:o.string().min(1,"Nama Pengguna tidak boleh kosong").transform(t=>t.toLowerCase().replaceAll(" ","").replaceAll("/","/")),email:o.string().email("Email tidak boleh kosong"),password:o.string().optional().superRefine((t,l)=>{t!==void 0&&t!==""&&t.length<8&&l.addIssue({code:"custom",message:"Kata Sandi harus minimal 8 karakter",path:["password"]})}),phone:o.coerce.string().min(1,"Nomor Telepon tidak boleh kosong").max(20,"Nomor Telepon tidak boleh lebih dari 20 karakter"),gender:o.enum(["Laki-laki","Perempuan"],{required_error:"Gender harus dipilih",invalid_type_error:"Gender tidak valid"}),nip:o.string().refine(t=>t===""||t.length===18&&/^\d+$/.test(t),t=>({message:t===""?"Nomor Induk Pegawai tidak boleh kosong":t.length!==18?"Nomor Induk Pegawai harus terdiri dari tepat 18 digit, anda memasukkan "+t.length+" digit":"Nomor Induk Pegawai harus terdiri dari digit saja"})).optional(),employee_position:o.string().min(1,"Posisi Pegawai tidak boleh kosong"),institution:o.string().min(1,"Institusi tidak boleh kosong"),employee_status:o.string().min(1,"Status Pegawai tidak boleh kosong"),last_education:o.enum(["D1","D2","D3","D4","S1","S2","S3"],{required_error:"Pendidikan terakhir harus dipilih",invalid_type_error:"Pendidikan terakhir tidak valid"}),profile_picture:o.any().optional().superRefine((t,l)=>{t&&t.size>z&&l.addIssue({code:o.ZodIssueCode.custom,message:"Ukuran file tidak boleh lebih dari 2MB"})})}),G=T.extend({npwp:o.string().length(16,"NPWP harus terdiri dari tepat 16 digit").regex(/^\d+$/,"NPWP harus terdiri dari digit saja"),bank_number:o.coerce.number().min(1,"Nomor Bank tidak boleh kosong").transform(String),bank_name:o.string().min(1,"Nama Bank tidak boleh kosong"),owner_name:o.string().min(1,"Nama Pemilik tidak boleh kosong")}),H=T.extend({golongan:o.enum(["1A","2A","3A","4A","5A","6A","7A","8A","9A","1B","2B","3B","4B","5B","6B","7B","8B","9B","1C","2C","3C","4C","5C","6C","7C","8C","9C","1D","2D","3D","4D","5D","6D","7D","8D","9D"],{invalid_type_error:"Golongan tidak valid"}),nakes_type:o.enum(["Tenaga Medis","Tenaga Psikologi Klinis","Tenaga Keperawatan","Tenaga Kebidanan","Tenaga Kefarmasian","Tenaga Kesehatan Masyarakat","Tenaga Kesehatan Lingkungan","Tenaga Gizi","Tenaga Keterapian Fisik","Tenaga Keteknisian Medis","Tenaga Teknologi Biomedika","Tenaga Kesehatan Tradisional"],{invalid_type_error:"Nakes tidak valid",required_error:"Nakes harus dipilih"}),residence_address:o.string().min(1,"Alamat tidak boleh kosong"),province:o.string().min(1,"Provinsi tidak boleh kosong"),regency:o.string().min(1,"Kabupaten/Kota tidak boleh kosong")});/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S=(...t)=>t.filter((l,h,c)=>!!l&&c.indexOf(l)===h).join(" ");/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=k.forwardRef(({color:t="currentColor",size:l=24,strokeWidth:h=2,absoluteStrokeWidth:c,className:d="",children:i,iconNode:f,...b},s)=>k.createElement("svg",{ref:s,...W,width:l,height:l,stroke:t,strokeWidth:c?Number(h)*24/Number(l):h,className:S("lucide",d),...b},[...f.map(([p,_])=>k.createElement(p,_)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=(t,l)=>{const h=k.forwardRef(({className:c,...d},i)=>k.createElement(Z,{ref:i,iconNode:l,className:S(`lucide-${O(t)}`,c),...d}));return h.displayName=`${t}`,h};/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=A("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.414.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=A("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var u;(function(t){t.CV="cv",t.IJAZAH="ijazah",t.SK="sk",t.SERTIFIKAT="sertifikat",t.REKENING="rekening",t.NPWP="npwp"})(u||(u={}));const I={organizer:[{type:u.CV,max:1},{type:u.IJAZAH,max:1/0},{type:u.SK,max:1/0},{type:u.SERTIFIKAT,max:1/0}],controller:[{type:u.CV,max:1},{type:u.IJAZAH,max:1/0},{type:u.SK,max:1/0},{type:u.SERTIFIKAT,max:1/0}],facilitator:[{type:u.CV,max:1},{type:u.IJAZAH,max:1/0},{type:u.REKENING,max:1},{type:u.NPWP,max:1}],user:[{type:u.CV,max:1},{type:u.IJAZAH,max:1/0},{type:u.SERTIFIKAT,max:1/0}]},X=({role:t,existingFiles:l,onFilesChange:h,props:c})=>{const[d,i]=k.useState(l),f=c.errors;console.log(f);const b=()=>{const n=new FormData;d.forEach((x,a)=>{n.append(`files[${a}]`,x.files),n.append(`file_type[${a}]`,x.file_type)}),n.append("_token",c.csrf_token),n.append("_method","PUT"),console.log("Submitting form data:",n),F.post(`/${t}/profile/${c.user.id}`,n)};k.useEffect(()=>{h(d),console.log(d)},[d,h]);const s=(n,x,a)=>{var y;const r=(y=n.target.files)==null?void 0:y[0];r&&i(j=>j.map(P=>P.id===x?{...P,files:r}:P))},p=(n,x)=>{i(a=>a.filter(r=>r.id!==n))},_=n=>{const x=I[t].find(a=>a.type===n);x&&d.filter(r=>r.file_type===n).length<x.max&&i([...d,{id:Math.random().toString(36).substr(2,9),files:"",file_type:n}])},N=({id:n,files:x,file_type:a},r)=>{const y=typeof x=="string";return e.jsxs("div",{className:"flex gap-2 items-center w-full",children:[y&&x!=""?e.jsxs(e.Fragment,{children:[e.jsx(g,{type:"text",name:`files[${n}]`,value:x.split("_").pop()||"",readOnly:!0,className:"flex-grow"}),e.jsx(w,{type:"button",variant:"outline",size:"icon",onClick:()=>{var j;return(j=document.getElementById(`file-${n}`))==null?void 0:j.click()},children:e.jsx(Q,{className:"h-4 w-4"})})]}):e.jsx("input",{type:"file",accept:"application/pdf",name:"files[]",id:`file-${n}`,onChange:j=>s(j,n),className:`mt-1 block w-full text-sm text-slate-500
                        file:mr-4 file:py-2 file:px-4
                        file:rounded-full file:border-0
                        file:text-sm file:font-semibold
                        file:bg-violet-50 file:text-violet-700
                        hover:file:bg-violet-100`}),e.jsx(w,{type:"button",variant:"ghost",size:"icon",onClick:()=>p(n),children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx("input",{type:"text",value:r,name:"file_type[]",readOnly:!0,hidden:!0})]},n)};return e.jsxs("div",{children:[I[t].map(({type:n,max:x})=>{const a=d.filter(y=>y.file_type===n),r=a.length<x;return e.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[e.jsx(m,{htmlFor:`file-${n}`,children:n.toUpperCase()}),a.map(y=>N(y,n)),r&&e.jsxs(w,{type:"button",variant:"outline",size:"sm",onClick:()=>_(n),className:"mt-2",children:[e.jsx(v,{className:"h-4 w-4 mr-2"})," Add ",n.toUpperCase()]})]},n)}),e.jsx(w,{type:"submit",onClick:b,children:"Submit"})]})};function Y({user:t,userInfo:l,role:h,props:c,schema:d}){const i=c.errors,[f,b]=k.useState(t),[s,p]=k.useState(l),_=a=>{const r=new FormData;r.append("name",a.name),r.append("username",a.username),r.append("phone",a.phone),r.append("email",a.email),r.append("password",a==null?void 0:a.password),r.append("gender",a.gender),r.append("nip",a.nip),r.append("employee_position",a.employee_position),r.append("institution",a.institution),r.append("employee_status",a.employee_status),r.append("last_education",a.last_education),r.append("profile_picture",a==null?void 0:a.profile_picture),r.append("province",a==null?void 0:a.province),r.append("regency",a==null?void 0:a.regency),r.append("residence_address",a==null?void 0:a.residence_address),r.append("golongan",a==null?void 0:a.golongan),r.append("nakes_type",a==null?void 0:a.nakes_type),r.append("npwp",a==null?void 0:a.npwp),r.append("bank_number",a==null?void 0:a.bank_number),r.append("bank_name",a==null?void 0:a.bank_name),r.append("owner_name",a==null?void 0:a.owner_name),r.append("_token",c.csrf_token),r.append("_method","PUT"),F.post(`/${t.role}/profile/${t.id}`,r)};let{form:N,errors:n,isSubmitting:x}=L({extend:J({schema:d}),onSubmit:_,onError:a=>{console.log(a)}});return console.log(n(),i),e.jsx("form",{ref:N,className:"flex flex-col w-full gap-4 px-8 justify-center items-center",children:e.jsxs("div",{className:"lg:w-[80vh] max-lg:w-full flex flex-col gap-4",children:[e.jsx($,{onFileChange:a=>console.log(a),value:s.profile_picture}),e.jsx("span",{className:"text-sm text-red-500",children:n().profile_picture||i.profile_picture}),e.jsx(m,{htmlFor:"name",children:"Nama"}),e.jsx(g,{type:"text",name:"name",id:"name",placeholder:"Masukkan Nama Anda",defaultValue:f.name,onChange:a=>b({...f,name:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().name||i.name}),e.jsx(m,{htmlFor:"username",children:"Username"}),e.jsx(g,{type:"text",name:"username",id:"username",placeholder:"Masukkan Username Anda",defaultValue:f.username,onChange:a=>b({...f,username:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().username||i.username}),e.jsx(m,{htmlFor:"phone",children:"Phone"}),e.jsx(g,{type:"tel",name:"phone",id:"phone",placeholder:"Masukkan Nomor Telepon Anda",defaultValue:f.phone,onChange:a=>b({...f,phone:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().phone||i.phone}),e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(g,{type:"email",name:"email",id:"email",placeholder:"Masukkan Email Anda",defaultValue:f.email,onChange:a=>b({...f,email:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().email||i.email}),e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(g,{type:"password",name:"password",id:"password",placeholder:"Kosongi jika tidak ingin mengganti password",className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().password||i.password}),e.jsx(m,{htmlFor:"gender",children:"Jenis Kelamin"}),e.jsx(C,{items:["Laki-laki","Perempuan"],name:"gender",placeholder:"Jenis Kelamin",value:s.gender,onValueChange:a=>p({...s,gender:a})}),e.jsx("span",{className:"text-sm text-red-500",children:n().gender||i.gender}),e.jsx(m,{htmlFor:"nip",children:"NIP"}),e.jsx(g,{type:"text",name:"nip",id:"nip",placeholder:"Masukkan NIP Anda",defaultValue:s.nip,onChange:a=>p({...s,nip:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().nip||i.nip}),e.jsx(m,{htmlFor:"employee_position",children:"Jabatan"}),e.jsx(g,{type:"text",name:"employee_position",id:"employee_position",placeholder:"Masukkan Jabatan Anda",defaultValue:s.employee_position,onChange:a=>p({...s,employee_position:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().employee_position||i.employee_position}),e.jsx(m,{htmlFor:"institution",children:"Institusi"}),e.jsx(g,{type:"text",name:"institution",id:"institution",placeholder:"Masukkan Institusi Anda",defaultValue:s.institution,onChange:a=>p({...s,institution:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().institution||i.institution}),e.jsx(m,{htmlFor:"employee_status",children:"Status Pegawai"}),e.jsx(g,{type:"text",name:"employee_status",id:"employee_status",placeholder:"Masukkan Status Pegawai Anda",defaultValue:s.employee_status,onChange:a=>p({...s,employee_status:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().employee_status||i.employee_status}),e.jsx(m,{htmlFor:"last_education",children:"Pendidikan Terakhir"}),e.jsx(C,{items:c.lastEducationEnum,name:"last_education",placeholder:"Pendidikan Terakhir",value:s.last_education,onValueChange:a=>p({...s,last_education:a})}),e.jsx("span",{className:"text-sm text-red-500",children:n().last_education||i.last_education}),h==="facilitator"?e.jsxs(e.Fragment,{children:[e.jsx(m,{htmlFor:"npwp",children:"NPWP"}),e.jsx(g,{type:"text",name:"npwp",id:"npwp",placeholder:"Masukkan NPWP Anda",defaultValue:s.npwp,onChange:a=>p({...s,npwp:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().npwp||i.npwp}),e.jsx(m,{htmlFor:"bank_number",children:"Nomor Rekening"}),e.jsx(g,{type:"text",name:"bank_number",id:"bank_number",placeholder:"Masukkan Nomor Rekening Anda",defaultValue:s.bank_number,onChange:a=>p({...s,bank_number:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().bank_number||i.bank_number}),e.jsx(m,{htmlFor:"bank_name",children:"Nama Bank"}),e.jsx(g,{type:"text",name:"bank_name",id:"bank_name",placeholder:"Masukkan Nama Bank Anda",defaultValue:s.bank_name,onChange:a=>p({...s,bank_name:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().bank_name||i.bank_name}),e.jsx(m,{htmlFor:"owner_name",children:"Nama Pemilik Rekening"}),e.jsx(g,{type:"text",name:"owner_name",id:"owner_name",placeholder:"Masukkan Nama Pemilik Rekening Anda",defaultValue:s.owner_name,onChange:a=>p({...s,owner_name:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().owner_name||i.owner_name})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{htmlFor:"golongan",children:"Golongan"}),e.jsx(C,{items:c.golonganEnum,name:"golongan",placeholder:"Golongan",value:s.golongan,onValueChange:a=>p({...s,golongan:a})}),e.jsx("span",{className:"text-sm text-red-500",children:n().golongan||i.golongan}),e.jsx(m,{htmlFor:"nakes_type",children:"Tipe Nakes"}),e.jsx(C,{items:c.nakesEnum,name:"nakes_type",placeholder:"Tipe Nakes",value:s.nakes_type,onValueChange:a=>p({...s,nakes_type:a})}),e.jsx("span",{className:"text-sm text-red-500",children:n().nakes_type||i.nakes_type}),e.jsx(m,{htmlFor:"residence_address",children:" Alamat Tinggal"}),e.jsx(g,{type:"text",name:"residence_address",id:"residence_address",placeholder:"Masukkan Alamat Tinggal Anda",defaultValue:s.residence_address,onChange:a=>p({...s,residence_address:a.target.value}),className:"w-full rounded-lg border-2 border-slate-500 p-3 text-slate-800 focus:border-blue-500"}),e.jsx("span",{className:"text-sm text-red-500",children:n().residence_address}),e.jsx(U,{valueRegen:l.regency,valueProv:l.province,errorsProv:n().province,errorsRegen:n().regency})]}),e.jsx(w,{type:"submit",className:"self-end mt-6",disabled:x(),children:"Submit"})]})})}const me=()=>{const[t,l]=k.useState("profile"),[h,c]=k.useState(!1),d=K().props,i=d.user,f=i.user_info,b=i.role,s=i.files,[p,_]=k.useState(s);console.log(d),k.useEffect(()=>{console.log(d)},[d]);const N=b==="facilitator"?G:H;let n=!1;return s[0]!==void 0&&(n=!!s[0].files),e.jsx("div",{className:"px-10",children:e.jsxs(B,{className:"w-full my-8 py-4",children:[e.jsxs(M,{children:[e.jsx(V,{className:"text-2xl font-bold px-4",children:"Profile"}),e.jsx(D,{className:"px-4",children:"Kelola informasi profil anda, termasuk detail pribadi dan file."})]}),e.jsx(E,{children:n?e.jsxs("section",{className:"flex gap-8 border-t py-10",children:[e.jsxs("div",{className:"flex flex-col gap-4 w-[calc(100vh-85vh)]",children:[e.jsx("h3",{className:`transition ease-in-out duration-300 text-lg pl-4 pr-6 py-2 rounded-xl cursor-pointer ${t==="profile"?"bg-blue-500 text-white":""}`,onClick:()=>l("profile"),children:"Profile"}),e.jsx("h3",{className:`transition ease-in-out duration-300 text-lg pl-4 pr-6 py-2 rounded-xl cursor-pointer ${t==="file"?"bg-blue-500 text-white":""}`,onClick:()=>l("file"),children:"File"})]}),t==="profile"&&e.jsx(Y,{user:i,userInfo:f,role:b,props:d,schema:N}),t==="file"&&e.jsx(X,{role:b,existingFiles:p,onFilesChange:_,props:d})]}):e.jsxs("section",{className:"flex gap-8 border-t py-10 px-4",children:[e.jsxs("p",{children:["Lengkapi File anda terlebih dahulu"," ",e.jsx("span",{className:"text-blue-500 underline cursor-pointer",onClick:()=>c(!0),children:"disini"})]}),h&&e.jsx(R,{dialogClose:()=>c(!1),isOpen:h})]})})]})})};export{me as default};
