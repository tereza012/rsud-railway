import{r as oe}from"./app-BmJ9-8ba.js";function ct(e,...t){const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ue(e){let t;return ct(e,n=>t=n)(),t}class lt extends Error{constructor(t,n){super(t),this.name="FelteSubmitError",this.response=n}}function dt(e,t){return Object.keys(e).some(r=>t(e[r]))}function Me(e,t){return Object.keys(e||{}).reduce((r,i)=>Object.assign(Object.assign({},r),{[i]:t(e[i])}),{})}function v(e){return Object.prototype.toString.call(e)==="[object Object]"}function K(e){return Object.keys(e||{}).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:v(e[n])?K(e[n]):Array.isArray(e[n])?[...e[n]]:e[n]}),{})}function ft(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function yt(e){return function(t){if(v(t)){const n=B(t,e);return ft(n,["key"])}return e}}function B(e,t){return Me(e,n=>v(n)?B(n,t):Array.isArray(n)?n.map(yt(t)):t)}function ge(...e){const t=e.pop(),n=e.shift();if(typeof n=="string")return n;const r=K(n);if(e.length===0)return r;for(const i of e){if(!i)continue;if(typeof i=="string")return i;let s=t(r,i);if(typeof s<"u")return s;const o=Array.from(new Set(Object.keys(r).concat(Object.keys(i))));for(const a of o)if(s=t(r[a],i[a]),typeof s<"u")r[a]=s;else if(v(i[a])&&v(r[a]))r[a]=ge(r[a],i[a],t);else if(Array.isArray(i[a]))r[a]=i[a].map((d,y)=>{if(!v(d))return d;const h=Array.isArray(r[a])?r[a][y]:r[a];return ge(h,d,t)});else if(v(i[a])){const d=B(K(i[a]),void 0);r[a]=ge(d,i[a],t)}else typeof i[a]<"u"&&(r[a]=i[a])}return r}function mt(e,t){if(!(v(e)&&v(t))){if(Array.isArray(t)){if(t.some(v))return;const n=Array.isArray(e)?e:[];return t.map((r,i)=>{var s;return(s=n[i])!==null&&s!==void 0?s:r})}if(typeof e<"u")return e}}function Qe(...e){return ge(...e,mt)}function rt(...e){return ge(...e,()=>{})}function ae(e,t,n){const r=s=>String.prototype.split.call(t,s).filter(Boolean).reduce((o,a)=>o!=null?o[a]:o,e),i=r(/[,[\]]+?/)||r(/[,[\].]+?/);return i===void 0||i===e?n:i}function Re(e,t,n){e&&(e=K(e)),v(e)||(e={});const r=Array.isArray(t)?t:t.match(/[^.[\]]+/g)||[],i=r[r.length-1];if(!i)return e;let s=e;for(let o=0;o<r.length-1;o++){const a=r[o];if(!s[a]||!v(s[a])&&!Array.isArray(s[a])){const d=r[o+1];isNaN(Number(d))?s[a]={}:s[a]=[]}s=s[a]}return s[i]=n(s[i]),e}function w(e,t,n){return Re(e,t,()=>n)}function We(e,t){if(!e||Object(e)!==e)return;typeof e<"u"&&(e=K(e));const n=Array.isArray(t)?t:t.toString().match(/[^.[\]]+/g)||[],r=n.length===1?e:ae(e,n.slice(0,-1).join("."));return Array.isArray(r)?r.splice(Number(n[n.length-1]),1):r==null||delete r[n[n.length-1]],e}function Ue(e,t){return dt(e,n=>v(n)?Ue(n,t):Array.isArray(n)?n.length===0||n.every(r=>typeof r=="string")?t(n):n.some(r=>v(r)?Ue(r,t):t(r)):t(n))}function Ne(e){return(e==null?void 0:e.nodeName)==="INPUT"}function vt(e){return(e==null?void 0:e.nodeName)==="TEXTAREA"}function xe(e){return(e==null?void 0:e.nodeName)==="SELECT"}function ze(e){return(e==null?void 0:e.nodeName)==="FIELDSET"}function C(e){return Ne(e)||vt(e)||xe(e)}function Ye(e){return e.nodeType===Node.ELEMENT_NODE}function U(e,t){return t??(C(e)?e.name:"")}function Ke(e){let t=e;for(;t&&t.nodeName!=="FORM";){if(t.hasAttribute("data-felte-ignore"))return!0;t=t.parentElement}return!1}function Ze(e,t){return!v(e)||!t?e:typeof t=="string"?ae(e,t):t(e)}function pt(e,t){if(!(v(e)||v(t))){if(e===null||e==="")return t;if(t===null||t===""||!t)return e;if(!(!e||!t)){if(Array.isArray(e)){if(!Array.isArray(t))return[...e,t];const n=[],r=Math.max(t.length,e.length);for(let i=0;i<r;i++){let s=e[i],o=t[i];!v(s)&&!v(o)?(Array.isArray(s)||(s=[s]),Array.isArray(o)||(o=[o]),n.push(...s,...o)):n.push(Fe([s??{},o??{}]))}return n.filter(Boolean)}return Array.isArray(t)||(t=[t]),[e,...t].reduce((n,r)=>n.concat(r),[]).filter(Boolean)}}}function Fe(e){return ge(...e,pt)}function bt(e,t){return t?(Array.isArray(t)?t:[t]).map(r=>r(e)):[]}function $e(e,t){return t?Array.isArray(t)?t.reduce((n,r)=>r(n),e):t(e):e}function nt(e=8){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function Xe(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.length!==t.length?!1:e.every((n,r)=>Xe(n,t[r]));if(v(e)&&v(t)){const n=Object.keys(e),r=Object.keys(t);return n.length!==r.length?!1:n.every(i=>Xe(e[i],t[i]))}return!1}function He(e,t,{onInit:n,onEnd:r}={}){let i;return(...s)=>{i||n==null||n(),i&&clearTimeout(i),i=setTimeout(()=>{e.apply(this,s),i=void 0,r==null||r()},t)}}function Ge(e){if(C(e))return[e];if(e.childElementCount===0)return[];const t=new Set;for(const n of e.children){if(C(n)&&t.add(n),ze(n))for(const r of n.elements)C(r)&&t.add(r);n.childElementCount>0&&Ge(n).forEach(r=>t.add(r))}return Array.from(t)}function it(e){for(const t of e.elements)!C(t)&&!ze(t)||e.hasAttribute("data-felte-keep-on-remove")&&!t.hasAttribute("data-felte-keep-on-remove")&&(t.dataset.felteKeepOnRemove=e.dataset.felteKeepOnRemove)}function st(e){return e.type.match(/^(number|range)$/)?e.value?+e.value:null:e.value}function Ve(e){var t;let n={},r={};for(const i of e.elements){if(ze(i)&&it(i),!C(i)||!i.name)continue;const s=U(i);if(Ne(i)){if(i.type==="checkbox"){if(typeof ae(n,s)>"u"){if(Array.from(e.querySelectorAll(`[name="${i.name}"]`)).filter(d=>C(d)?s===U(d):!1).length===1){n=w(n,s,i.checked),r=w(r,s,!1);continue}n=w(n,s,i.checked?[i.value]:[]),r=w(r,s,!1);continue}Array.isArray(ae(n,s))&&i.checked&&(n=Re(n,s,a=>[...a,i.value]));continue}if(i.type==="radio"){if(ae(n,s))continue;n=w(n,s,i.checked?i.value:void 0),r=w(r,s,!1);continue}if(i.type==="file"){n=w(n,s,i.multiple?Array.from(i.files||[]):(t=i.files)===null||t===void 0?void 0:t[0]),r=w(r,s,!1);continue}}else if(xe(i)){if(!i.multiple)n=w(n,s,i.value);else{const d=Array.from(i.selectedOptions).map(y=>y.value);n=w(n,s,d)}r=w(r,s,!1);continue}const o=st(i);n=w(n,s,o),r=w(r,s,!1)}return{defaultData:n,defaultTouched:r}}function At(e,t){var n;if(!C(e))return;const r=t;if(Ne(e)){if(e.type==="checkbox"){const i=r;if(typeof i>"u"||typeof i=="boolean"){e.checked=!!i;return}Array.isArray(i)&&(i.includes(e.value)?e.checked=!0:e.checked=!1);return}if(e.type==="radio"){const i=r;e.value===i?e.checked=!0:e.checked=!1;return}if(e.type==="file"){if(t instanceof FileList)e.files=t;else if(t instanceof File&&typeof DataTransfer<"u"){const i=new DataTransfer;i.items.add(t),e.files=i.files}else if(typeof DataTransfer<"u"&&Array.isArray(t)&&t.some(i=>i instanceof File)){const i=new DataTransfer;for(const s of t)s instanceof File&&i.items.add(s);e.files=i.files}else(!t||Array.isArray(t)&&!t.length)&&(e.files=null,e.value="");return}}else if(xe(e)){if(e.multiple){if(Array.isArray(r)){e.value=String((n=r[0])!==null&&n!==void 0?n:"");const s=r.map(o=>String(o));for(const o of e.options)s.includes(o.value)?o.selected=!0:o.selected=!1}}else{e.value=String(r??"");for(const s of e.options)s.value===String(r)?s.selected=!0:s.selected=!1}return}e.value=String(r??"")}function Ce(e,t){for(const n of e.elements){if(ze(n)&&it(n),!C(n)||!n.name)continue;const r=U(n);At(n,ae(t,r))}}function ot(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function me(e,t){return Me(e,n=>v(n)?me(n,t):Array.isArray(n)?n.length===0||n.every(r=>typeof r=="string")?t:n.map(r=>{const i=me(r,t);return ot(i,["key"])}):t)}function Te(e){return e?Me(e,t=>v(t)?Te(t):Array.isArray(t)?t.length===0||t.every(n=>typeof n=="string")?t:t.map(n=>{if(!v(n))return n;const r=Te(n);return r.key||(r.key=nt()),r}):t):{}}function je(e){return e?Me(e,t=>v(t)?je(t):Array.isArray(t)?t.length===0||t.every(n=>typeof n=="string")?t:t.map(n=>{if(!v(n))return n;const r=je(n);return ot(r,["key"])}):t):{}}function ht(){class e extends CustomEvent{constructor(i){super("feltesuccess",{detail:i})}}class t extends CustomEvent{constructor(i){super("felteerror",{detail:i,cancelable:!0})}setErrors(i){this.preventDefault(),this.errors=i}}class n extends Event{constructor(){super("feltesubmit",{cancelable:!0})}handleSubmit(i){this.onSubmit=i}handleError(i){this.onError=i}handleSuccess(i){this.onSuccess=i}}return{createErrorEvent:r=>new t(r),createSubmitEvent:()=>new n,createSuccessEvent:r=>new e(r)}}function Et(e){if(e)return async function(){let n=new FormData(e);const r=new URL(e.action),i=e.method.toLowerCase()==="get"?"get":r.searchParams.get("_method")||e.method;let s=e.enctype;e.querySelector('input[type="file"]')&&(s="multipart/form-data"),(i==="get"||s==="application/x-www-form-urlencoded")&&(n=new URLSearchParams(n));let o;i==="get"?(n.forEach((d,y)=>{r.searchParams.append(y,d)}),o={method:i,headers:{Accept:"application/json"}}):o={method:i,body:n,headers:Object.assign(Object.assign({},s!=="multipart/form-data"&&{"Content-Type":s}),{Accept:"application/json"})};const a=await window.fetch(r.toString(),o);if(a.ok)return a;throw new lt("An error occurred while submitting the form",a)}}function qe(e,t,n,r){return Re(e,t,i=>(typeof i<"u"&&!Array.isArray(i)||(i||(i=[]),typeof r>"u"?i.push(n):i.splice(r,0,n)),i))}function gt(e,t,n,r){return Re(e,t,i=>(!i||!Array.isArray(i)||([i[n],i[r]]=[i[r],i[n]]),i))}function St(e,t,n,r){return Re(e,t,i=>(!i||!Array.isArray(i)||i.splice(r,0,i.splice(n,1)[0]),i))}function et(e){return typeof e=="function"}function Ee(e){return(n,r)=>{if(typeof n=="string"){const i=n;e(s=>{const o=et(r)?r(ae(s,i)):r;return w(s,i,o)})}else e(i=>et(n)?n(i):n)}}function wt({stores:e,config:t,validateErrors:n,validateWarnings:r,_getCurrentExtenders:i}){var s;let o,a=Te((s=t.initialValues)!==null&&s!==void 0?s:{});const{data:d,touched:y,errors:h,warnings:g,isDirty:F,isSubmitting:O,interacted:k}=e,D=Ee(d.update),R=Ee(y.update),E=Ee(h.update),$=Ee(g.update);function H(c){D(b=>{const p=c(b);return o&&Ce(o,p),p})}const T=(c,b,p)=>{Ee(H)(c,b),typeof c=="string"&&p&&R(c,!0)};function J(c,b,p){const j=v(b)?me(b,!1):!1,P=v(j)?B(j,[]):[];b=v(b)?Object.assign(Object.assign({},b),{key:nt()}):b,h.update(I=>qe(I,c,P,p)),g.update(I=>qe(I,c,P,p)),y.update(I=>qe(I,c,j,p)),d.update(I=>{const Q=qe(I,c,b,p);return setTimeout(()=>o&&Ce(o,Q)),Q})}function N(c){h.update(c),g.update(c),y.update(c),d.update(b=>{const p=c(b);return setTimeout(()=>o&&Ce(o,p)),p})}function X(c){N(b=>We(b,c))}function Z(c,b,p){N(j=>gt(j,c,b,p))}function V(c,b,p){N(j=>St(j,c,b,p))}function ve(c){const b=ae(a,c),p=v(b)?me(b,!1):!1,j=v(p)?B(p,[]):[];d.update(P=>{const I=w(P,c,b);return o&&Ce(o,I),I}),y.update(P=>w(P,c,p)),h.update(P=>w(P,c,j)),g.update(P=>w(P,c,j))}const A=Ee(O.update),M=Ee(F.update),ee=Ee(k.update);async function ce(){const c=ue(d);y.set(me(c,!0)),k.set(null);const b=await n(c);return await r(c),b}function le(){T(K(a)),R(c=>B(c,!1)),k.set(null),F.set(!1)}function x(c){return async function(p){var j,P,I,Q,de,Se,we;const{createErrorEvent:Ie,createSubmitEvent:Pe,createSuccessEvent:_e}=ht(),re=Pe();o==null||o.dispatchEvent(re);const l=(P=(j=re.onError)!==null&&j!==void 0?j:c==null?void 0:c.onError)!==null&&P!==void 0?P:t.onError,u=(Q=(I=re.onSuccess)!==null&&I!==void 0?I:c==null?void 0:c.onSuccess)!==null&&Q!==void 0?Q:t.onSuccess,f=(we=(Se=(de=re.onSubmit)!==null&&de!==void 0?de:c==null?void 0:c.onSubmit)!==null&&Se!==void 0?Se:t.onSubmit)!==null&&we!==void 0?we:Et(o);if(!f||(p==null||p.preventDefault(),re.defaultPrevented))return;O.set(!0),k.set(null);const m=je(ue(d)),z=await n(m,c==null?void 0:c.validate),be=await r(m,c==null?void 0:c.warn);if(be&&g.set(rt(B(m,[]),be)),y.set(me(m,!0)),z&&(y.set(me(z,!0)),Ue(z,W=>Array.isArray(W)?W.length>=1:!!W))){await new Promise(W=>setTimeout(W)),i().forEach(W=>{var Y;return(Y=W.onSubmitError)===null||Y===void 0?void 0:Y.call(W,{data:m,errors:z})}),O.set(!1);return}const ne={event:p,setFields:T,setData:D,setTouched:R,setErrors:E,setWarnings:$,unsetField:X,addField:J,resetField:ve,reset:le,setInitialValues:te.setInitialValues,moveField:V,swapFields:Z,form:o,controls:o&&Array.from(o.elements).filter(C),config:Object.assign(Object.assign({},t),c)};try{const L=await f(m,ne);o==null||o.dispatchEvent(_e(Object.assign({response:L},ne))),await(u==null?void 0:u(L,ne))}catch(L){const W=Ie(Object.assign({error:L},ne));if(o==null||o.dispatchEvent(W),!l&&!W.defaultPrevented)throw L;if(!l&&!W.errors)return;const Y=W.errors||await(l==null?void 0:l(L,ne));Y&&(y.set(me(Y,!0)),h.set(Y),await new Promise(ie=>setTimeout(ie)),i().forEach(ie=>{var Ae;return(Ae=ie.onSubmitError)===null||Ae===void 0?void 0:Ae.call(ie,{data:m,errors:ue(h)})}))}finally{O.set(!1)}}}const te={setData:D,setFields:T,setTouched:R,setErrors:E,setWarnings:$,setIsSubmitting:A,setIsDirty:M,setInteracted:ee,validate:ce,reset:le,unsetField:X,resetField:ve,addField:J,swapFields:Z,moveField:V,createSubmitHandler:x,handleSubmit:x(),setInitialValues:c=>{a=Te(c)}};return{public:te,private:{_setFormNode(c){o=c},_getInitialValues:()=>a}}}function _t({helpers:e,stores:t,config:n,extender:r,createSubmitHandler:i,handleSubmit:s,_setFormNode:o,_getInitialValues:a,_setCurrentExtenders:d,_getCurrentExtenders:y}){const{setFields:h,setTouched:g,reset:F,setInitialValues:O}=e,{addValidator:k,addTransformer:D,validate:R}=e,{data:E,errors:$,warnings:H,touched:T,isSubmitting:J,isDirty:N,interacted:X,isValid:Z,isValidating:V}=t;function ve(A){A.requestSubmit||(A.requestSubmit=s);function M(l){return function(u){return u({form:A,stage:l,controls:Array.from(A.elements).filter(C),data:E,errors:$,warnings:H,touched:T,isValid:Z,isValidating:V,isSubmitting:J,isDirty:N,interacted:X,config:n,addValidator:k,addTransformer:D,setFields:h,validate:R,reset:F,createSubmitHandler:i,handleSubmit:s})}}d(r.map(M("MOUNT"))),A.noValidate=!!n.validate;const{defaultData:ee,defaultTouched:ce}=Ve(A);o(A),O(rt(K(ee),a())),h(a()),T.set(ce);function le(l){const u=U(l),f=Array.from(A.querySelectorAll(`[name="${l.name}"]`)).filter(m=>C(m)?u===U(m):!1);if(f.length!==0)return f.length===1?E.update(m=>w(m,U(l),l.checked)):E.update(m=>w(m,U(l),f.filter(Ne).filter(z=>z.checked).map(z=>z.value)))}function x(l){const u=A.querySelectorAll(`[name="${l.name}"]`),f=Array.from(u).find(m=>Ne(m)&&m.checked);E.update(m=>w(m,U(l),f==null?void 0:f.value))}function te(l){var u;const f=Array.from((u=l.files)!==null&&u!==void 0?u:[]);E.update(m=>w(m,U(l),l.multiple?f:f[0]))}function pe(l){if(!l.multiple)E.update(u=>w(u,U(l),l.value));else{const u=Array.from(l.selectedOptions).map(f=>f.value);E.update(f=>w(f,U(l),u))}}function c(l){const u=l.target;if(!u||!C(u)||xe(u)||Ke(u)||["checkbox","radio","file"].includes(u.type)||!u.name)return;N.set(!0);const f=st(u);X.set(u.name),E.update(m=>w(m,U(u),f))}function b(l){const u=l.target;if(!(!u||!C(u)||Ke(u))&&u.name)if(g(U(u),!0),X.set(u.name),(xe(u)||["checkbox","radio","file","hidden"].includes(u.type))&&N.set(!0),u.type==="hidden"&&E.update(f=>w(f,U(u),u.value)),xe(u))pe(u);else if(Ne(u))u.type==="checkbox"?le(u):u.type==="radio"?x(u):u.type==="file"&&te(u);else return}function p(l){const u=l.target;!u||!C(u)||Ke(u)||u.name&&(g(U(u),!0),X.set(u.name))}function j(l){l.preventDefault(),F()}const P={childList:!0,subtree:!0};function I(l){let u=ue(E),f=ue(T),m=ue($),z=ue(H);for(const be of l.reverse()){if(be.hasAttribute("data-felte-keep-on-remove")&&be.dataset.felteKeepOnRemove!=="false")continue;const ne=/.*(\[[0-9]+\]|\.[0-9]+)\.[^.]+$/;let L=U(be);const W=ue(T);if(ne.test(L)){const ie=L.split(".").slice(0,-1).join("."),Ae=ae(W,ie);v(Ae)&&Object.keys(Ae).length<=1&&(L=ie)}u=We(u,L),f=We(f,L),m=We(m,L),z=We(z,L)}E.set(u),T.set(f),$.set(m),H.set(z)}const Q=He(()=>{y().forEach(f=>{var m;return(m=f.destroy)===null||m===void 0?void 0:m.call(f)}),d(r.map(M("UPDATE")));const{defaultData:l,defaultTouched:u}=Ve(A);E.update(f=>Qe(f,l)),T.update(f=>Qe(f,u)),e.setFields(ue(E))},0);let de=[];const Se=He(()=>{y().forEach(l=>{var u;return(u=l.destroy)===null||u===void 0?void 0:u.call(l)}),d(r.map(M("UPDATE"))),I(de),de=[]},0);function we(l){Array.from(l.addedNodes).some(f=>Ye(f)?C(f)?!0:Ge(f).length>0:!1)&&Q()}function Ie(l){for(const u of l.removedNodes){if(!Ye(u))continue;const f=Ge(u);f.length!==0&&(de.push(...f),Se())}}function Pe(l){for(const u of l)u.type==="childList"&&(u.addedNodes.length>0&&we(u),u.removedNodes.length>0&&Ie(u))}const _e=new MutationObserver(Pe);_e.observe(A,P),A.addEventListener("input",c),A.addEventListener("change",b),A.addEventListener("focusout",p),A.addEventListener("submit",s),A.addEventListener("reset",j);const re=$.subscribe(l=>{for(const u of A.elements){if(!C(u)||!u.name)continue;const f=ae(l,U(u)),m=Array.isArray(f)?f.join(`
`):typeof f=="string"?f:void 0;m!==u.dataset.felteValidationMessage&&(m?(u.dataset.felteValidationMessage=m,u.setAttribute("aria-invalid","true")):(delete u.dataset.felteValidationMessage,u.removeAttribute("aria-invalid")))}});return{destroy(){_e.disconnect(),A.removeEventListener("input",c),A.removeEventListener("change",b),A.removeEventListener("focusout",p),A.removeEventListener("submit",s),A.removeEventListener("reset",j),re(),y().forEach(l=>{var u;return(u=l.destroy)===null||u===void 0?void 0:u.call(l)})}}}return{form:ve}}function Ot(e){const t={aborted:!1,priority:e};return{signal:t,abort(){t.aborted=!0}}}function kt(e,t){if(v(e))return!t||v(t)&&Object.keys(t).length===0?B(e,null):void 0;if(Array.isArray(e)){if(e.some(v))return;const n=Array.isArray(t)?t:[];return e.map((r,i)=>{const s=n[i];return Array.isArray(s)&&s.length===0?null:r&&s||null})}return Array.isArray(t)&&t.length===0?null:Array.isArray(t)?e?t:null:e&&t?[t]:null}function Tt(e,t){if(v(e))return!t||v(t)&&Object.keys(t).length===0?B(e,null):void 0;if(Array.isArray(e)){if(e.some(v))return;const n=Array.isArray(t)?t:[];return e.map((r,i)=>{const s=n[i];return Array.isArray(s)&&s.length===0?null:s||null})}return Array.isArray(t)&&t.length===0?null:Array.isArray(t)?t:t?[t]:null}function Dt([e,t]){return ge(t,e,kt)}function Ft([e,t]){return ge(t,e,Tt)}function Nt(e){return function(n,r,i){const s=Array.isArray(n)?n:[n],o=new Array(s.length),a=e(i),d=a.set,y=a.subscribe;let h;function g(){h=s.map((O,k)=>O.subscribe(D=>{o[k]=D,d(r(o))}))}function F(){h==null||h.forEach(O=>O())}return a.subscribe=function(k){const D=y(k);return()=>{D()}},[a,g,F]}}function xt(e,t){var n,r,i,s,o,a,d,y,h;const g=Nt(e),F=t.initialValues=t.initialValues?Te($e(K(t.initialValues),t.transform)):{},O=me(je(F),!1),k=e(O),D=e(0),[R,E,$]=g([k,D],([_,S])=>Ue(_,G=>!!G)&&S>=1,!1);delete R.set,delete R.update;function H(_){let S;return async function(G,fe,se,Oe=!1){if(!se||!G)return;let he=fe&&Object.keys(fe).length>0?fe:B(G,[]);const ke=Ot(Oe);if((!(S!=null&&S.signal.priority)||Oe)&&(S==null||S.abort(),S=ke),S.signal.priority&&!Oe)return;D.update(Le=>Le+1);const Je=bt(je(G),se);return Je.forEach(async Le=>{const at=await Le;ke.signal.aborted||(he=Fe([he,at]),_.set(he))}),await Promise.all(Je),S=void 0,D.update(Le=>Le-1),he}}let T=B(O,[]);const J=e(F),N=B(O,[]),X=e(N),Z=e(K(N)),[V,ve,A]=g([X,Z],Fe,K(N)),M=B(O,[]),ee=e(M),ce=e(K(M)),[le,x,te]=g([ee,ce],Fe,K(M)),[pe,c,b]=g([V,k],Dt,K(N)),[p,j,P]=g([le,k],Ft,K(M));let I=!1;const[Q,de,Se]=g(V,([_])=>{var S;return I?!Ue(_,q=>Array.isArray(q)?q.length>=1:!!q):(I=!0,!t.validate&&!(!((S=t.debounced)===null||S===void 0)&&S.validate))},!t.validate&&!(!((n=t.debounced)===null||n===void 0)&&n.validate));delete Q.set,delete Q.update;const we=e(!1),Ie=e(!1),Pe=e(null),_e=H(X),re=H(ee),l=H(Z),u=H(ce),f=He(l,(o=(i=(r=t.debounced)===null||r===void 0?void 0:r.validateTimeout)!==null&&i!==void 0?i:(s=t.debounced)===null||s===void 0?void 0:s.timeout)!==null&&o!==void 0?o:300,{onInit:()=>{D.update(_=>_+1)},onEnd:()=>{D.update(_=>_-1)}}),m=He(u,(h=(d=(a=t.debounced)===null||a===void 0?void 0:a.warnTimeout)!==null&&d!==void 0?d:(y=t.debounced)===null||y===void 0?void 0:y.timeout)!==null&&h!==void 0?h:300);async function z(_,S){var q;const G=_e(_,T,S??t.validate,!0);if(S)return G;const fe=l(_,T,(q=t.debounced)===null||q===void 0?void 0:q.validate,!0);return Fe(await Promise.all([G,fe]))}async function be(_,S){var q;const G=re(_,T,S??t.warn,!0);if(S)return G;const fe=u(_,T,(q=t.debounced)===null||q===void 0?void 0:q.warn,!0);return Fe(await Promise.all([G,fe]))}let ne=N,L=M;function W(){const _=J.subscribe(se=>{var Oe,he;const ke=je(se);_e(ke,T,t.validate),re(ke,T,t.warn),f(ke,T,(Oe=t.debounced)===null||Oe===void 0?void 0:Oe.validate),m(ke,T,(he=t.debounced)===null||he===void 0?void 0:he.warn)}),S=k.subscribe(se=>{T=B(se,[])}),q=V.subscribe(se=>{ne=se}),G=le.subscribe(se=>{L=se});ve(),de(),x(),c(),j(),E();function fe(){_(),b(),A(),te(),P(),Se(),$(),S(),q(),G()}return fe}function Y(_){X.set(_(ne)),Z.set({})}function ie(_){ee.set(_(L)),ce.set({})}function Ae(_){Y(()=>_)}function ut(_){ie(()=>_)}return pe.set=Ae,pe.update=Y,p.set=ut,p.update=ie,{data:J,errors:pe,warnings:p,touched:k,isValid:Q,isSubmitting:we,isDirty:Ie,isValidating:R,interacted:Pe,validateErrors:z,validateWarnings:be,cleanup:t.preventStoreStart?()=>{}:W(),start:W}}function jt(e,t){var n,r;(n=e.extend)!==null&&n!==void 0||(e.extend=[]),(r=e.debounced)!==null&&r!==void 0||(e.debounced={}),e.validate&&!Array.isArray(e.validate)&&(e.validate=[e.validate]),e.debounced.validate&&!Array.isArray(e.debounced.validate)&&(e.debounced.validate=[e.debounced.validate]),e.transform&&!Array.isArray(e.transform)&&(e.transform=[e.transform]),e.warn&&!Array.isArray(e.warn)&&(e.warn=[e.warn]),e.debounced.warn&&!Array.isArray(e.debounced.warn)&&(e.debounced.warn=[e.debounced.warn]);function i(x,{debounced:te,level:pe}={debounced:!1,level:"error"}){var c;const b=pe==="error"?"validate":"warn";(c=e.debounced)!==null&&c!==void 0||(e.debounced={});const p=te?e.debounced:e;p[b]?p[b]=[...p[b],x]:p[b]=[x]}function s(x){e.transform?e.transform=[...e.transform,x]:e.transform=[x]}const o=Array.isArray(e.extend)?e.extend:[e.extend];let a=[];const d=()=>a,y=x=>{a=x},{isSubmitting:h,isValidating:g,data:F,errors:O,warnings:k,touched:D,isValid:R,isDirty:E,cleanup:$,start:H,validateErrors:T,validateWarnings:J,interacted:N}=xt(t.storeFactory,e),X=F.update,Z=F.set,V=x=>X(te=>Te($e(x(te),e.transform))),ve=x=>Z(Te($e(x,e.transform)));F.update=V,F.set=ve;const A=wt({extender:o,config:e,addValidator:i,addTransformer:s,validateErrors:T,validateWarnings:J,_getCurrentExtenders:d,stores:{data:F,errors:O,warnings:k,touched:D,isValid:R,isValidating:g,isSubmitting:h,isDirty:E,interacted:N}}),{createSubmitHandler:M,handleSubmit:ee}=A.public;a=o.map(x=>x({stage:"SETUP",errors:O,warnings:k,touched:D,data:F,isDirty:E,isValid:R,isValidating:g,isSubmitting:h,interacted:N,config:e,addValidator:i,addTransformer:s,setFields:A.public.setFields,reset:A.public.reset,validate:A.public.validate,handleSubmit:ee,createSubmitHandler:M}));const ce=Object.assign({config:e,stores:{data:F,touched:D,errors:O,warnings:k,isSubmitting:h,isValidating:g,isValid:R,isDirty:E,interacted:N},createSubmitHandler:M,handleSubmit:ee,helpers:Object.assign(Object.assign({},A.public),{addTransformer:s,addValidator:i}),extender:o,_getCurrentExtenders:d,_setCurrentExtenders:y},A.private),{form:le}=_t(ce);return Object.assign({data:F,errors:O,warnings:k,touched:D,isValid:R,isSubmitting:h,isValidating:g,isDirty:E,interacted:N,form:le,cleanup:$,startStores:H},A.public)}function Rt(e){return!!e.set}function ye(e){const[,t]=oe.useState({}),n=oe.useRef(ue(e)),r=oe.useRef({}),i=oe.useRef(!1),s=oe.useCallback(o=>{const a=i.current;if(!o)return i.current=!0,n.current;typeof a=="boolean"?i.current||(i.current={[o.toString()]:o}):a[o.toString()]=o;let d=r.current[o.toString()];return d==null&&(d=r.current[o.toString()]=Ze(n.current,o)),d},[]);return s.subscribe=e.subscribe,Rt(e)&&(s.set=e.set,s.update=e.update),oe.useEffect(()=>e.subscribe(o=>{if(n.current=o,!i.current)return;if(i.current===!0)return t({});let a=!1;const d=Object.keys(i.current);for(const y of d){const h=i.current[y],g=Ze(o,h);Xe(g,r.current[h.toString()])||(r.current[h.toString()]=g,a=!0)}a&&t({})}),[]),s}function tt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}const De=[],Be=()=>{};function It(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Pt(e,t=Be){let n;const r=new Set;function i(a){if(It(e,a)&&(e=a,n)){const d=!De.length;for(const y of r)y[1](),De.push(y,e);if(d){for(let y=0;y<De.length;y+=2)De[y][0](De[y+1]);De.length=0}}}function s(a){i(a(e))}function o(a,d=Be){const y=[a,d];return r.add(y),r.size===1&&(n=t(i)||Be),a(e),()=>{r.delete(y),n&&r.size===0&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}function Lt(e){const t=oe.useRef();return t.current===void 0&&(t.current=e()),t.current}function Ct(e){const t=oe.useRef(null),n=oe.useRef(),r=Lt(()=>{const R=Object.assign(Object.assign({},e),{preventStoreStart:!0}),E=jt(R,{storeFactory:Pt}),{form:$}=E,H=tt(E,["form"]);return Object.assign({form:J=>{if(!J)return;const{destroy:N}=$(J);n.current=N}},H)}),{startStores:i,form:s}=r,o=tt(r,["startStores","form"]),a=ye(o.data),d=ye(o.errors),y=ye(o.touched),h=ye(o.warnings),g=ye(o.isSubmitting),F=ye(o.isDirty),O=ye(o.isValid),k=ye(o.isValidating),D=ye(o.interacted);return oe.useEffect(()=>{const R=i();return s(t.current),()=>{var E;R(),(E=n.current)===null||E===void 0||E.call(n)}},[]),Object.assign(Object.assign({},o),{form:t,data:a,errors:d,warnings:h,touched:y,isSubmitting:g,isDirty:F,isValid:O,isValidating:k,interacted:D})}function Wt(e){function t(n){return n.issues.reduce((r,i)=>i.path?Re(r,i.path.join("."),s=>!s||!Array.isArray(s)?[i.message]:[...s,i.message]):r,{})}return async function(r){try{await e.parseAsync(r)}catch(i){return t(i)}}}function qt({schema:e,level:t="error"}){return function(r){if(r.stage!=="SETUP")return{};const i=Wt(e);return r.addValidator(i,{level:t}),{}}}export{Ct as u,qt as v};
